<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GolfGag-Gadget</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, sans-serif;
  margin: 0;
  background: linear-gradient(135deg,#e6f2ff,#f7faff);
  color: #333;
}
header {
  padding: 30px;
  text-align: center;
}
h1 {
  margin: 0 0 10px;
  font-size: 2.4em;
  color:#2b7cff;
}
button {
  background: #2b7cff;
  color: #fff;
  border: none;
  padding: 14px 24px;
  margin: 8px;
  border-radius: 8px;
  font-size: 1.2em;
  cursor: pointer;
  transition: background .2s;
}
button:hover {
  background: #1b5fcc;
}
input, select {
  padding: 10px;
  margin: 8px 0;
  font-size: 1em;
  border-radius:6px;
  border:1px solid #ccc;
}
#startSection {
  padding: 60px 20px;
  text-align: center;
}
.start-card{
  display:inline-block;
  background:#fff;
  padding:40px 30px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}
#startSection label {
  display: block;
  margin-bottom: 20px;
  font-size: 1.2em;
  color:#333;
}
.section{
  text-align:center;
}
.generator-box{
  display:inline-flex;
  width:260px;
  min-height:80px;
  background:#d6e8ff;
  border-radius:12px;
  margin-top:10px;
  font-size:1.4em;
  font-weight:bold;
  align-items:center;
  justify-content:center;
  font-family:'Trebuchet MS',sans-serif;
  text-align:center;
}
.playerCard {
  display: inline-block;
  vertical-align: top;
  background: #fff;
  border-radius: 10px;
  padding: 15px;
  margin: 15px;
  min-width: 240px;
  box-shadow: 0 0 6px rgba(0,0,0,0.1);
  text-align:left;
}
.optionList, .placementTable {
  font-size: 0.9em;
  margin-top: 8px;
  background: #f9f9f9;
  padding: 6px;
  border-radius: 6px;
  min-height: 40px;
}
.placementTable{
  max-height:120px;
  overflow-y:auto;
  background:#f0f4f7;
}
.holeRow {
  margin: 4px 0;
}
</style>
</head>
<body>

<header>
  <h1>GolfGag-Gadget</h1>
</header>

<div id="startSection">
  <div class="start-card">
    <label>Spieleranzahl:
      <select id="playerCount">
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </label>
    <label>Modus:
      <select id="mode">
        <option value="einzel">Einzel</option>
        <option value="team">Team</option>
      </select>
    </label>
    <button onclick="startGame()">Spiel starten</button>
  </div>
</div>

<div id="game" style="display:none;">
  <div class="section">
    <button onclick="randomClub()">üé≤ Schl√§ger</button>
    <div id="clubResultBox" class="generator-box"></div>
    <button onclick="randomForm()">üé≤ Spielform</button>
    <div id="formResultBox" class="generator-box"></div>
    <br>
    <button onclick="resetGame()">Neue Runde</button>
  </div>

  <div id="playersSection" class="section"></div>

  <div id="holesSection" class="section">
    <h3>Platzierungen pro Bahn</h3>
    <div id="holes"></div>
  </div>
</div>

<script>
// === Konfigurierbare Daten ===
let clubs = [
  "Driver","Holz 3","Holz 5","Hybrid",
  "Eisen 4","Eisen 5","Eisen 6","Eisen 7","Eisen 8","Eisen 9",
  "Pitching Wedge","Gap Wedge","Sand Wedge","Lob Wedge","Putter"
];
let forms = [
  "Zufallsschl√§ger (Einer f√ºr die Bahn)",
  "Zufallsschl√§ger (f√ºr Alle)",
  "Zufallsschl√§ger (Luck of the draw)",
  "Nur Eisen 7","Nur Pitching Wedge","Nur H√∂lzer",
  "Von Rot","Von Gelb",
  "Nimm 2 -Best Ball","Nimm 2 -Worst Ball","Scramble Best Ball",
  "Scramble Worst Ball","Nur zwei Zufallsschl√§ger","Pflicht-Fairway-/Gr√ºntreffer",
  "Leder Wedge","Leder Wedge Mitspieler (Gr√ºn rettet)","Mitspieler w√§hlen Schl√§ger"
];
let options = [
  {name:"Holz getroffen",value:-1},
  {name:"Penalty Area",value:-1},
  {name:"Out of bounds",value:-1},
  {name:"3‚ÄìPutt",value:-1},
  {name:"1-Putt",value:+1},
  {name:"Chip-In",value:+1},
  {name:"Birdie",value:+1},
  {name:"Nearest to the Pin",value:+1},
  {name:"Fairway verfehlt",value:-1},
  {name:"Green in Regulation",value:+1},
  {name:"PAR gerettet",value:+1},
  {name:"Bunker",value:-1},
  {name:"Sandy PAR",value:+1},
  {name:"Socket",value:-1},
  {name:"Lady",value:-1},
  {name:"2 Chips",value:-1},
  {name:"√úber‚Äòs Gr√ºn getoppt",value:-1},
  {name:"Doppel-PAR und mehr",value:-1},
  {name:"Goldene Ananas",value:-1},
  {name:"Luftschlag",value:-1},
  {name:"Leider kurz",value:-1},
  {name:"Schneckenficker",value:-1},
  {name:"Gro√üer Schwung, kleines Ergebnis",value:-1},
  {name:"Luftalarm",value:-1}
];

let players = [];
let optionOwner = {}; 
let placements = {};  

function startGame(){
  const count = parseInt(document.getElementById("playerCount").value);
  players = [];
  optionOwner = {};
  placements = {};
  for (let i=0;i<count;i++){
    players.push({name:"",bonus:0,selectedOptions:[]});
  }
  document.getElementById("startSection").style.display="none";
  document.getElementById("game").style.display="block";
  renderPlayers();
  renderHoles(count);
}
function resetGame(){
  document.getElementById("game").style.display="none";
  document.getElementById("startSection").style.display="block";
  document.getElementById("clubResultBox").textContent="";
  document.getElementById("formResultBox").textContent="";
  optionOwner = {};
  placements = {};
}
function randomClub(){
  const club = clubs[Math.floor(Math.random()*clubs.length)];
  document.getElementById("clubResultBox").textContent=club;
}
function randomForm(){
  const form = forms[Math.floor(Math.random()*forms.length)];
  document.getElementById("formResultBox").textContent=form;
}
function renderPlayers(){
  const container = document.getElementById("playersSection");
  container.innerHTML="";
  players.forEach((p,i)=>{
    let div = document.createElement("div");
    div.className="playerCard";
    div.innerHTML=`
      <div>
        Spieler ${i+1}:
        <input type="text" placeholder="Name" value="${p.name}" 
        oninput="players[${i}].name=this.value;updateUI();">
      </div>
      <div><strong>Punkte:</strong> <span id="score${i}">0</span></div>
      <div>
        <select onchange="addOption(${i},this.value)">
          <option value="">Option w√§hlen‚Ä¶</option>
          ${options.map(o=>`<option value="${o.name}">${o.name} (${o.value>0?'+':''}${o.value})</option>`).join('')}
        </select>
      </div>
      <div class="optionList" id="opt${i}"></div>
      <div class="placementTable" id="placement${i}"></div>
    `;
    container.appendChild(div);
  });
  document.getElementById("playersSection").style.display="block";
  updateUI();
}
function addOption(playerIndex,optionName){
  if(!optionName) return;
  const opt = options.find(o=>o.name===optionName);
  if(!opt) return;
  if(optionOwner[optionName]!==undefined){
    let prevIndex=optionOwner[optionName];
    let prev=players[prevIndex];
    prev.bonus -= opt.value;
    prev.selectedOptions=prev.selectedOptions.filter(o=>o.name!==optionName);
  }
  let p=players[playerIndex];
  p.selectedOptions=p.selectedOptions.filter(o=>o.name!==optionName);
  p.selectedOptions.push(opt);
  p.bonus+=opt.value;
  optionOwner[optionName]=playerIndex;
  updateUI();
}

// === Platzierungen ===
function renderHoles(count){
  const holesDiv=document.getElementById("holes");
  holesDiv.innerHTML="";
  for(let h=1;h<=18;h++){
    let row=document.createElement("div");
    row.className="holeRow";
    let html=`<strong>Bahn ${h}:</strong> `;
    for(let i=0;i<count;i++){
      if(count==2){
        html+=`
          <label>${i+1}:
          <select id="sel-${h}-${i}" onchange="setPlacement(${h},${i},this.value)">
            <option value="">-</option>
            <option value="1">1. Platz</option>
            <option value="2">2. Platz</option>
            <option value="T">T (geteilt)</option>
          </select>
          </label>
        `;
      } else {
        html+=`
          <label>${i+1}:
          <select id="sel-${h}-${i}" onchange="setPlacement(${h},${i},this.value)">
            <option value="">-</option>
            <option value="1">1. Platz</option>
            <option value="2">2. Platz</option>
            ${count>=3?'<option value="3">3. Platz</option>':''}
            ${count==4?'<option value="4">4. Platz</option>':''}
          </select>
          </label>
        `;
      }
    }
    row.innerHTML=html;
    holesDiv.appendChild(row);
  }
  document.getElementById("holesSection").style.display="block";
}
function setPlacement(hole,playerIndex,place){
  const count=players.length;

  // Sonderfall "T" bei 2 Spielern
  if(count==2 && place==="T"){
    for (let i=0;i<count;i++){
      placements[`${hole}-${i}`]={points:0,label:"T"};
      // andere Selectboxen synchronisieren
      document.getElementById(`sel-${hole}-${i}`).value="T";
    }
    updateUI();
    return;
  }

  // Standard-Punkte
  place=parseInt(place);
  if(isNaN(place)) return;

  let points=0;
  if(count==4){
    if(place==1) points=+2;
    if(place==2) points=+1;
    if(place==3) points=-1;
    if(place==4) points=-2;
  } else if(count==3){
    if(place==1) points=+1;
    if(place==2) points=0;
    if(place==3) points=-1;
  } else if(count==2){
    if(place==1) points=+1;
    if(place==2) points=-1;
  }

  placements[`${hole}-${playerIndex}`]={points:points,label:place};
  updateUI();
}

function updateUI(){
  players.forEach((p,i)=>{
    let placementSum=0;
    for(let h=1;h<=18;h++){
      let key=`${h}-${i}`;
      if(placements[key]!==undefined){
        placementSum+=placements[key].points;
      }
    }
    const total=p.bonus+placementSum;
    document.getElementById("score"+i).textContent=total;

    document.getElementById("opt"+i).innerHTML=
      p.selectedOptions.map(o=>`${o.name} (${o.value>0?'+':''}${o.value})`).join('<br>');

    let placementHtml='';
    for(let h=1;h<=18;h++){
      let key=`${h}-${i}`;
      if(placements[key]!==undefined){
        placementHtml+=`Bahn ${h}: ${placements[key].label} (${placements[key].points} Punkte)<br>`;
      }
    }
    document.getElementById("placement"+i).innerHTML=placementHtml;
  });
}
</script>

</body>
</html>