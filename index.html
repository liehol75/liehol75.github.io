<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GolfGag-Gadget</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, sans-serif;
  margin: 0;
  background: linear-gradient(135deg,#e6f2ff,#f7faff);
  color: #333;
}
header { padding: 30px; text-align:center; }
h1 { margin:0 0 10px; font-size:2.4em; color:#2b7cff; }

button {
  background:#2b7cff; color:#fff; border:none;
  padding:12px 20px; margin:10px; border-radius:8px;
  font-size:1.2em; cursor:pointer; transition:background .2s;
}
button:hover { background:#1b5fcc; }

input, select {
  padding:10px; margin:10px 0; font-size:1.2em;
  border-radius:6px; border:1px solid #ccc;
}

#startSection { padding:40px 20px; text-align:center; }
.start-card{
  display:inline-block; background:#fff; padding:32px;
  border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

#generators{
  text-align:center;
  margin-bottom:30px;
}
.generator-block{
  display:inline-block;
  text-align:center;
  margin:10px;
}
.generator-box{
  width:260px; min-height:64px;
  background:#d6e8ff; border-radius:12px; margin-top:8px;
  font-size:1.1em; font-weight:bold; align-items:center;
  justify-content:center; display:flex;
}

.playerCard {
  display:inline-block; vertical-align:top; background:#fff;
  border-radius:10px; padding:12px; margin:12px;
  min-width:260px; box-shadow:0 0 6px rgba(0,0,0,0.08);
  text-align:left;
}
.teamCard {
  display:inline-block; vertical-align:top; background:#fff;
  border-radius:10px; padding:12px; margin:12px;
  min-width:300px; box-shadow:0 0 6px rgba(0,0,0,0.08);
  text-align:left;
}

.optionList, .placementTable {
  font-size:0.9em; margin-top:8px; background:#f9f9f9; padding:6px;
  border-radius:6px; min-height:40px;
}
.placementTable { max-height:140px; overflow-y:auto; background:#f0f4f7; }
.holeRow { margin:6px 0; display:flex; align-items:center; gap:20px; flex-wrap:wrap; }

.badge {
  display:inline-block; padding:8px 12px; border-radius:20px;
  color:#fff; font-weight:700; min-width:80px; text-align:center;
  font-size:1.2em;
}
.up { background:#2b7cff; }
.down { background:#d9534f; }
.tied { background:#8a8a8a; }

.centerRow { display:flex; align-items:center; justify-content:center; gap:16px; flex-wrap:wrap; }
.sectionTitle { margin:14px 0 8px; font-weight:700; color:#234; }
</style>
</head>
<body>

<header>
  <h1>GolfGag-Gadget</h1>
</header>

<div id="startSection">
  <div class="start-card">
    <label>Spieleranzahl:
      <select id="playerCount" onchange="updateModeOptions()">
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </label>
    <br>
    <label>Modus:
      <select id="mode"></select>
    </label>
    <br>
    <button onclick="startGame()">Spiel starten</button>
  </div>
</div>

<div id="game" style="display:none;">
  <div id="generators" class="section">
    <div class="generator-block">
      <button onclick="randomClub()">üé≤ Schl√§ger</button>
      <div id="clubResultBox" class="generator-box"></div>
    </div>
    <div class="generator-block">
      <button onclick="randomForm()">üé≤ Spielform</button>
      <div id="formResultBox" class="generator-box"></div>
    </div>
    <br>
    <button onclick="resetGame()">Zur√ºck</button>
  </div>

  <div id="playersSection" class="section"></div>

  <div id="holesSection" class="section">
    <h3 class="sectionTitle">Platzierungen pro Bahn</h3>
    <div id="holes"></div>
  </div>
</div>

<script>
let clubs=["Driver","Holz 3","Holz 5","Hybrid","Eisen 4","Eisen 5","Eisen 6","Eisen 7","Eisen 8","Eisen 9","Pitching Wedge","Gap Wedge","Sand Wedge","Lob Wedge","Putter"];
let forms=["Zufallsschl√§ger (Einer f√ºr die Bahn)","Zufallsschl√§ger (f√ºr Alle)","Zufallsschl√§ger (Luck of the draw)","Nur Eisen 7","Nur Pitching Wedge","Nur H√∂lzer","Von Rot","Von Gelb","Nimm 2 -Best Ball","Nimm 2 -Worst Ball","Scramble Best Ball","Scramble Worst Ball","Nur zwei Zufallsschl√§ger","Pflicht-Fairway-/Gr√ºntreffer","Leder Wedge","Leder Wedge Mitspieler (Gr√ºn rettet)","Mitspieler w√§hlen Schl√§ger"];
let options=[
  {name:"Holz getroffen",value:-1},{name:"Penalty Area",value:-1},{name:"Out of bounds",value:-1},{name:"3‚ÄìPutt",value:-1},{name:"1-Putt",value:+1},{name:"Chip-In",value:+1},{name:"Birdie",value:+1},{name:"Nearest to the Pin",value:+1},{name:"Fairway verfehlt",value:-1},{name:"Green in Regulation",value:+1},{name:"PAR gerettet",value:+1},{name:"Bunker",value:-1},{name:"Sandy PAR",value:+1},{name:"Socket",value:-1},{name:"Lady",value:-1},{name:"2 Chips",value:-1},{name:"√úber‚Äòs Gr√ºn getoppt",value:-1},{name:"Doppel-PAR und mehr",value:-1},{name:"Goldene Ananas",value:-1},{name:"Luftschlag",value:-1},{name:"Leider kurz",value:-1},{name:"Schneckenficker",value:-1},{name:"Gro√üer Schwung, kleines Ergebnis",value:-1},{name:"Luftalarm",value:-1},
  {name:"Texas Wedge (+1)", value:+1}
];

let players=[];
let optionOwner={};
let placements={};

function updateModeOptions(){
  const count=parseInt(document.getElementById("playerCount").value);
  const modeSel=document.getElementById("mode");
  modeSel.innerHTML="";
  let opt=document.createElement("option");
  opt.value="einzel"; opt.textContent="Einzel"; modeSel.appendChild(opt);
  if(count==4){let optTeam=document.createElement("option"); optTeam.value="team"; optTeam.textContent="Team"; modeSel.appendChild(optTeam);}
  if(count==2||count==4){let optMp=document.createElement("option"); optMp.value="matchplay"; optMp.textContent="Matchplay"; modeSel.appendChild(optMp);}
}

function startGame(){
  const count=parseInt(document.getElementById("playerCount").value);
  const mode=document.getElementById("mode").value;
  players=[]; optionOwner={}; placements={};
  for(let i=0;i<count;i++){players.push({name:"",bonus:0,selectedOptions:[]});}
  document.getElementById("startSection").style.display="none";
  document.getElementById("game").style.display="block";
  document.getElementById("generators").style.display=(mode==="matchplay")?"none":"block";
  renderPlayers(); renderHoles(count,mode);
}

function resetGame(){
  document.getElementById("game").style.display="none";
  document.getElementById("startSection").style.display="block";
  document.getElementById("clubResultBox").textContent="";
  document.getElementById("formResultBox").textContent="";
  optionOwner={}; placements={};
}

function randomClub(){document.getElementById("clubResultBox").textContent=clubs[Math.floor(Math.random()*clubs.length)];}
function randomForm(){document.getElementById("formResultBox").textContent=forms[Math.floor(Math.random()*forms.length)];}

function renderPlayers(){
  const container=document.getElementById("playersSection");
  container.innerHTML="";
  const mode=document.getElementById("mode").value;
  const count=players.length;
  if(mode==="matchplay"&&count===4){
    let teamDiv=document.createElement("div"); teamDiv.className="centerRow";
    let t1=document.createElement("div");t1.className="teamCard";
    t1.innerHTML=`<strong>Team 1</strong><div>Spieler A:<br><input type="text" oninput="players[0].name=this.value;updateUI()"></div><div>Spieler B:<br><input type="text" oninput="players[1].name=this.value;updateUI()"></div><div class="placementTable" id="placement-team1"></div>`;
    let t2=document.createElement("div");t2.className="teamCard";
    t2.innerHTML=`<strong>Team 2</strong><div>Spieler C:<br><input type="text" oninput="players[2].name=this.value;updateUI()"></div><div>Spieler D:<br><input type="text" oninput="players[3].name=this.value;updateUI()"></div><div class="placementTable" id="placement-team2"></div>`;
    teamDiv.appendChild(t1); teamDiv.appendChild(t2); container.appendChild(teamDiv);
    let statusRow=document.createElement("div");statusRow.className="centerRow";statusRow.style.marginTop="10px";
    statusRow.innerHTML=`<div id="status-team1" class="badge tied">TIED</div><div id="status-team2" class="badge tied">TIED</div>`;
    container.appendChild(statusRow);return;
  }
  if(mode==="matchplay"&&count===2){
    let row=document.createElement("div");row.className="centerRow";
    for(let i=0;i<2;i++){
      let div=document.createElement("div");div.className="playerCard";
      div.innerHTML=`<div><strong>Spieler ${i+1}</strong><br><input type="text" oninput="players[${i}].name=this.value;updateUI();"></div><div style="margin-top:8px;text-align:center;"><div id="status${i}" class="badge tied">TIED</div></div><div class="placementTable" id="placement${i}"></div>`;
      row.appendChild(div);
    }container.appendChild(row);return;
  }
  // default stroke-play
  let row=document.createElement("div");row.className="centerRow";
  players.forEach((p,i)=>{
    let div=document.createElement("div");div.className="playerCard";
    div.innerHTML=`<div>Spieler ${i+1}:<br><input type="text" oninput="players[${i}].name=this.value;updateUI();"></div>
    <div style="margin-top:6px;"><select onchange="addOption(${i},this.value)"><option value="">Option w√§hlen‚Ä¶</option>${options.map(o=>`<option value="${o.name}">${o.name} (${o.value>0?'+':''}${o.value})</option>`).join('')}</select></div>
    <div class="optionList" id="opt${i}"></div>
    <div>Gesamtpunkte: <span id="score${i}">0</span></div>
    <div class="placementTable" id="placement${i}"></div>`;
    row.appendChild(div);
  });container.appendChild(row);updateUI();
}

function addOption(playerIndex,optionName){
  if(!optionName)return;
  const opt=options.find(o=>o.name===optionName);
  if(!opt)return;
  // vorherigen Besitzer abziehen
  if(optionOwner[optionName]!==undefined){
    let prevIndex=optionOwner[optionName];
    let prev=players[prevIndex];
    prev.bonus-=opt.value;
    prev.selectedOptions=prev.selectedOptions.filter(o=>o.name!==optionName);
  }
  let p=players[playerIndex];
  if(!p.selectedOptions.some(o=>o.name===optionName)){
    p.selectedOptions.push(opt);p.bonus+=opt.value;
    optionOwner[optionName]=playerIndex;
  }
  updateUI();
}

function renderHoles(count,mode){
  const holesDiv=document.getElementById("holes");
  holesDiv.innerHTML="";
  for(let h=1;h<=18;h++){
    let row=document.createElement("div");row.className="holeRow";
    let html=`<strong>Bahn ${h}:</strong> `;
    if(mode==="matchplay"&&count===4){
      html+=`Team 1:<select id="sel-${h}-team-1" onchange="setPlacementMatchplayTeam(${h},1,this.value)"><option value="">-</option><option value="Gewonnen">Gewonnen</option><option value="Verloren">Verloren</option><option value="Geteilt">Geteilt</option></select>
      Team 2:<select id="sel-${h}-team-2" onchange="setPlacementMatchplayTeam(${h},2,this.value)"><option value="">-</option><option value="Gewonnen">Gewonnen</option><option value="Verloren">Verloren</option><option value="Geteilt">Geteilt</option></select>`;
    }else if(mode==="matchplay"&&count===2){
      html+=`Spieler 1:<select id="sel-${h}-0" onchange="setPlacementMatchplay(${h},0,this.value)"><option value="">-</option><option value="Gewonnen">Gewonnen</option><option value="Verloren">Verloren</option><option value="Geteilt">Geteilt</option></select>
      Spieler 2:<select id="sel-${h}-1" onchange="setPlacementMatchplay(${h},1,this.value)"><option value="">-</option><option value="Gewonnen">Gewonnen</option><option value="Verloren">Verloren</option><option value="Geteilt">Geteilt</option></select>`;
    }else{
      for(let i=0;i<count;i++){
        if(count==2){
          html+=`<label>${i+1}:<select id="sel-${h}-${i}" onchange="setPlacement(${h},${i},this.value)"><option value="">-</option><option value="1">1. Platz</option><option value="2">2. Platz</option><option value="T">T (geteilt)</option></select></label>`;
        }else{
          html+=`<label>${i+1}:<select id="sel-${h}-${i}" onchange="setPlacement(${h},${i},this.value)"><option value="">-</option><option value="1">1. Platz</option><option value="2">2. Platz</option>${count>=3?'<option value="3">3. Platz</option>':''}${count==4?'<option value="4">4. Platz</option>':''}</select></label>`;
        }
      }
    }
    row.innerHTML=html;holesDiv.appendChild(row);
  }
  document.getElementById("holesSection").style.display="block";
}

function setPlacement(hole,playerIndex,place){
  const count=players.length;
  if(count==2&&place==="T"){
    for(let i=0;i<count;i++){
      placements[`${hole}-${i}`]={points:0,label:"T"};
      let sel=document.getElementById(`sel-${hole}-${i}`);if(sel)sel.value="T";
    }updateUI();return;
  }
  let num=parseInt(place);if(isNaN(num))return;
  let points=0;
  if(count==4){if(num==1)points=+2;if(num==2)points=+1;if(num==3)points=-1;if(num==4)points=-2;}
  else if(count==3){if(num==1)points=+1;if(num==2)points=0;if(num==3)points=-1;}
  else if(count==2){if(num==1)points=+1;if(num==2)points=-1;}
  placements[`${hole}-${playerIndex}`]={points:points,label:num};updateUI();
}

function setPlacementMatchplay(hole,playerIndex,value){
  if(value===""){placements[`${hole}-0`]=undefined;placements[`${hole}-1`]=undefined;updateUI();return;}
  if(value==="Gewonnen"){placements[`${hole}-0`]=(playerIndex===0)?{result:"Gewonnen"}:{result:"Verloren"};
    placements[`${hole}-1`]=(playerIndex===0)?{result:"Verloren"}:{result:"Gewonnen"};}
  else if(value==="Verloren"){placements[`${hole}-0`]=(playerIndex===0)?{result:"Verloren"}:{result:"Gewonnen"};
    placements[`${hole}-1`]=(playerIndex===0)?{result:"Gewonnen"}:{result:"Verloren"};}
  else if(value==="Geteilt"){placements[`${hole}-0`]={result:"Geteilt"};placements[`${hole}-1`]={result:"Geteilt"};}
  document.getElementById(`sel-${hole}-0`).value=placements[`${hole}-0`].result;
  document.getElementById(`sel-${hole}-1`).value=placements[`${hole}-1`].result;
  updateUI();
}
function setPlacementMatchplayTeam(hole,team,value){
  if(value===""){placements[`${hole}-team1`]=undefined;placements[`${hole}-team2`]=undefined;updateUI();return;}
  if(value==="Gewonnen"){placements[`${hole}-team1`]=(team===1)?{result:"Gewonnen"}:{result:"Verloren"};
    placements[`${hole}-team2`]=(team===1)?{result:"Verloren"}:{result:"Gewonnen"};}
  else if(value==="Verloren"){placements[`${hole}-team1`]=(team===1)?{result:"Verloren"}:{result:"Gewonnen"};
    placements[`${hole}-team2`]=(team===1)?{result:"Gewonnen"}:{result:"Verloren"};}
  else if(value==="Geteilt"){placements[`${hole}-team1`]={result:"Geteilt"};placements[`${hole}-team2`]={result:"Geteilt"};}
  document.getElementById(`sel-${hole}-team-1`).value=placements[`${hole}-team1`].result;
  document.getElementById(`sel-${hole}-team-2`).value=placements[`${hole}-team2`].result;
  updateUI();
}

function updateUI(){
  const mode=document.getElementById("mode").value;
  if(mode==="matchplay"){updateMatchplayUI();return;}
  players.forEach((p,i)=>{
    let placementSum=0;
    for(let h=1;h<=18;h++){
      let key=`${h}-${i}`;
      if(placements[key]!==undefined){placementSum+=placements[key].points;}
    }
    const total=p.bonus+placementSum;
    if(document.getElementById("score"+i))
      document.getElementById("score"+i).textContent=total;
    if(document.getElementById("opt"+i))
      document.getElementById("opt"+i).innerHTML=p.selectedOptions.map(o=>`${o.name} (${o.value>0?'+':''}${o.value})`).join('<br>');
    let placementHtml='';
    for(let h=1;h<=18;h++){
      let key=`${h}-${i}`;
      if(placements[key]!==undefined){
        placementHtml+=`Bahn ${h}: ${placements[key].points} Punkte<br>`;
      }
    }
    if(document.getElementById("placement"+i))
      document.getElementById("placement"+i).innerHTML=placementHtml;
  });
}

function updateMatchplayUI(){
  const count=players.length;
  if(count===2){
    let up=0;let played=0;
    for(let h=1;h<=18;h++){
      if(!placements[`${h}-0`])continue;
      played++;
      let res=placements[`${h}-0`].result;
      if(res==="Gewonnen")up++; else if(res==="Verloren")up--;
    }
    let remaining=18-played;
    let status0="",status1="",class0="",class1="";
    if(up===0){status0=status1="TIED";class0=class1="badge tied";}
    else if(up>0){
      if(up>remaining){status0=`${up} & ${remaining}`;status1="DOWN";class0="badge up";class1="badge down";}
      else{status0=`${up} UP`;status1=`${Math.abs(up)} DOWN`;class0="badge up";class1="badge down";}
    }else{
      let abs=Math.abs(up);
      if(abs>remaining){status1=`${abs} & ${remaining}`;status0="DOWN";class1="badge up";class0="badge down";}
      else{status1=`${abs} UP`;status0=`${abs} DOWN`;class1="badge up";class0="badge down";}
    }
    document.getElementById("status0").textContent=status0;
    document.getElementById("status1").textContent=status1;
    document.getElementById("status0").className=class0;
    document.getElementById("status1").className=class1;
  }else if(count===4){
    let up=0;let played=0;
    for(let h=1;h<=18;h++){
      if(!placements[`${h}-team1`])continue;
      played++;
      let res=placements[`${h}-team1`].result;
      if(res==="Gewonnen")up++; else if(res==="Verloren")up--;
    }
    let remaining=18-played;
    let s1="",s2="",c1="",c2="";
    if(up===0){s1=s2="TIED";c1=c2="badge tied";}
    else if(up>0){
      if(up>remaining){s1=`${up} & ${remaining}`;s2="DOWN";c1="badge up";c2="badge down";}
      else{s1=`${up} UP`;s2=`${Math.abs(up)} DOWN`;c1="badge up";c2="badge down";}
    }else{
      let abs=Math.abs(up);
      if(abs>remaining){s2=`${abs} & ${remaining}`;s1="DOWN";c2="badge up";c1="badge down";}
      else{s2=`${abs} UP`;s1=`${abs} DOWN`;c2="badge up";c1="badge down";}
    }
    document.getElementById("status-team1").textContent=s1;
    document.getElementById("status-team2").textContent=s2;
    document.getElementById("status-team1").className=c1;
    document.getElementById("status-team2").className=c2;
  }
}

updateModeOptions();
</script>

</body>
</html>