<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GolfGag-Gadget</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, sans-serif;
  margin: 0;
  background: linear-gradient(135deg,#e6f2ff,#f7faff);
  color: #333;
}
header { padding: 30px; text-align:center; }
h1 { margin:0 0 10px; font-size:2.4em; color:#2b7cff; }

button {
  background:#2b7cff; color:#fff; border:none;
  padding:12px 20px; margin:10px; border-radius:8px;
  font-size:1.2em; cursor:pointer; transition:background .2s;
}
button:hover { background:#1b5fcc; }

input, select {
  padding:10px; margin:10px 0; font-size:1.05em;
  border-radius:6px; border:1px solid #ccc;
}

#startSection { padding:40px 20px; text-align:center; }
.start-card{
  display:inline-block; background:#fff; padding:32px;
  border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

/* Generatoren - vertikal, zentriert */
#generators{
  text-align:center;
  margin-bottom:30px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  width:100%;
}
.generator-block{
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  margin:0;
}
.generator-box{
  width:320px; min-height:64px;
  background:#d6e8ff; border-radius:12px; margin-top:8px;
  font-size:1.05em; font-weight:700; align-items:center;
  justify-content:center; display:flex; text-align:center; padding:8px;
  white-space:pre-wrap; /* ZeilenumbrÃ¼che */
}

.playerCard, .teamCard {
  display:inline-block; vertical-align:top; background:#fff;
  border-radius:10px; padding:12px; margin:12px;
  min-width:260px; box-shadow:0 0 6px rgba(0,0,0,0.08);
  text-align:left;
}
.teamCard { min-width:300px; text-align:center; }

.optionList, .placementTable {
  font-size:0.9em; margin-top:8px; background:#f9f9f9; padding:6px;
  border-radius:6px; min-height:40px;
}
.placementTable { max-height:140px; overflow-y:auto; background:#f0f4f7; display:flex; align-items:center; justify-content:center; }

.badge {
  display:inline-block; padding:8px 12px; border-radius:20px;
  color:#fff; font-weight:700; min-width:80px; text-align:center;
  font-size:1.1em;
}
.up { background:#2b7cff; }
.down { background:#d9534f; }
.tied { background:#8a8a8a; }

.centerRow { display:flex; align-items:center; justify-content:center; gap:16px; flex-wrap:wrap; }
.sectionTitle { margin:14px 0 8px; font-weight:700; color:#234; text-align:center; }

#holes {
  display:flex;
  flex-wrap:wrap;
  gap:14px;
  justify-content:center;
  padding:12px;
}

/* Einzelne Bahn */
.holeCard {
  background:#fff;
  border-radius:12px;
  padding:14px;
  width:320px;
  box-shadow:0 3px 8px rgba(0,0,0,0.06);
  text-align:center;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
}
.holeTitle {
  font-weight:700;
  margin-bottom:10px;
}
.holeControls {
  display:flex;
  justify-content:center;
  align-items:center;
  gap:20px;
  flex-wrap:wrap;
  width:100%;
}
.holeControls.small-gap { gap:8px; }
.holeCard select {
  min-width:120px;
  padding:8px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:1em;
  background:transparent;
}

@media (max-width:420px){
  .holeCard { width:92%; }
  .generator-box { width:92%; }
}

#playersSection { text-align:center; display:flex; justify-content:center; align-items:flex-start; flex-wrap:wrap; gap:12px; }

.holeGrid {
  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:center;
  justify-content:center;
}
.holeRowNums {
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  justify-content:center;
  align-items:center;
}
.holeCircle {
  width:30px;
  height:30px;
  border-radius:50%;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:0.95em;
  line-height:1;
  border:2px solid #ddd;
  background:#fff;
  color:#000;
  box-sizing:border-box;
}
.holeCircle.c-team1 { background:#2b7cff; border-color:#2b7cff; color:#fff; }
.holeCircle.c-team2 { background:#d9534f; border-color:#d9534f; color:#fff; }
.holeCircle.c-tied { background:#8a8a8a; border-color:#8a8a8a; color:#fff; }
</style>
</head>
<body>

<header>
  <h1>GolfGag-Gadget</h1>
</header>

<div id="startSection">
  <div class="start-card">
    <label>Spieleranzahl:
      <select id="playerCount" onchange="updateModeOptions()">
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </label>
    <br>
    <label>Modus:
      <select id="mode"></select>
    </label>
    <br>
    <button onclick="startGame()">Spiel starten</button>
  </div>
</div>

<div id="game" style="display:none;">
  <div id="generators" class="section">
    <div class="generator-block">
      <button onclick="randomClub()">ðŸŽ² SchlÃ¤ger</button>
      <div id="clubResultBox" class="generator-box"></div>
    </div>

    <div class="generator-block">
      <button onclick="randomForm()">ðŸŽ² Spielform</button>
      <div id="formResultBox" class="generator-box"></div>
    </div>

    <br>
    <button onclick="resetGame()">ZurÃ¼ck</button>
  </div>

  <div id="playersSection" class="section"></div>

  <div id="holesSection" class="section">
    <h3 class="sectionTitle">Platzierungen pro Bahn</h3>
    <div id="holes"></div>
  </div>
</div>

<script>
// *** Variables ***
let players = [];
let mode = 'stroke';
let placements = {};
let matchplayResults = {};

// *** Mode Options ***
function updateModeOptions(){
  const count = parseInt(document.getElementById('playerCount').value);
  const modeSel = document.getElementById('mode');
  modeSel.innerHTML = '';
  if(count===2){
    modeSel.innerHTML += '<option value="stroke">Strokeplay</option><option value="match">Matchplay</option>';
  } else if(count===3){
    modeSel.innerHTML += '<option value="stroke">Strokeplay</option>';
  } else if(count===4){
    modeSel.innerHTML += '<option value="stroke">Strokeplay</option><option value="matchteams">Matchplay (Teams)</option>';
  }
}
updateModeOptions();

// *** Start Game ***
function startGame(){
  const count = parseInt(document.getElementById('playerCount').value);
  mode = document.getElementById('mode').value;
  players = [];
  placements = {};
  matchplayResults = {};
  for(let i=1;i<=count;i++){
    players.push({name:'Spieler '+i,score:0});
  }
  document.getElementById('startSection').style.display='none';
  document.getElementById('game').style.display='block';
  renderPlayers();
  renderHoles();
}

// *** Reset ***
function resetGame(){
  document.getElementById('game').style.display='none';
  document.getElementById('startSection').style.display='block';
}

// *** Render Players/Teams ***
function renderPlayers(){
  const section=document.getElementById('playersSection');
  section.innerHTML='';
  if(mode==='matchteams'){
    // two teams
    section.innerHTML+=renderTeamCard('Team 1','team1');
    section.innerHTML+=renderTeamCard('Team 2','team2');
  } else {
    // individuals
    players.forEach((p,i)=>{
      section.innerHTML+=renderPlayerCard(p.name,i);
    });
  }
}

function renderPlayerCard(name,index){
return `<div class="playerCard">
<h3>${name}</h3>
<div class="optionList" id="options-${index}"></div>
<div class="placementTable" id="placements-${index}"></div>
</div>`;
}

function renderTeamCard(name,team){
return `<div class="teamCard">
<h3>${name}</h3>
<div id="${team}-badge" style="margin-top:6px;"></div>
<div class="optionList" id="options-${team}"></div>
<div class="placementTable" id="placements-${team}"></div>
<div class="holeGrid">
  <div class="holeRowNums" id="${team}-row1"></div>
  <div class="holeRowNums" id="${team}-row2"></div>
</div>
</div>`;
}

// *** Render Holes ***
function renderHoles(){
  const hDiv=document.getElementById('holes');
  hDiv.innerHTML='';
  for(let h=1;h<=18;h++){
    hDiv.innerHTML+=renderHole(h);
  }
}

function renderHole(num){
  let controls='';
  if(mode==='stroke'){
    controls='<div class="holeControls '+(players.length===4?'small-gap':'')+'">'+
      players.map((p,i)=>`<select onchange="setPlacement(${num},${i},this.value)">
      <option value="">â€“</option>
      <option>1</option><option>2</option>${players.length>=3?'<option>3</option>':''}${players.length===4?'<option>4</option>':''}
    </select>`).join('')+'</div>';
  } else if(mode==='match'){
    controls='<div class="holeControls">'+
      players.map((p,i)=>`<select onchange="setMatchplay(${num},${i},this.value)">
      <option value="">â€“</option>
      <option>Win</option><option>Lose</option><option>Half</option>
    </select>`).join('')+'</div>';
  } else if(mode==='matchteams'){
    controls='<div class="holeControls">'+
    ['team1','team2'].map(team=>`<select onchange="setMatchplayTeam(${num},'${team}',this.value)">
      <option value="">â€“</option>
      <option>Win</option><option>Lose</option><option>Half</option>
    </select>`).join('')+'</div>';
  }

  return `<div class="holeCard">
  <div class="holeTitle">Bahn ${num}</div>
  ${controls}
  </div>`;
}

// *** Placements Stroke ***
function setPlacement(hole,playerIndex,val){
  placements[hole+'-'+playerIndex]=val;
  updateUI();
}

// *** Matchplay ***
function setMatchplay(hole,playerIndex,val){
  placements[hole+'-'+playerIndex]=val;
  updateUI();
}

function setMatchplayTeam(hole,team,val){
  placements[hole+'-'+team]=val;
  updateUI();
}

// *** Update UI ***
function updateUI(){
  if(mode==='matchteams'){
    updateTeamMatchplay();
  } else if(mode==='match'){
    updateIndividualMatchplay();
  }
}

// Individual Matchplay
function updateIndividualMatchplay(){
  let score=0; // positive = player1 up
  for(let h=1;h<=18;h++){
    const v1=placements[h+'-0'];
    const v2=placements[h+'-1'];
    if(v1==='Win' && v2==='Lose')score++;
    else if(v1==='Lose' && v2==='Win')score--;
  }
  const played=Object.keys(placements).filter(k=>k.includes('-0')).length;
  const remaining=18-played;
  let badge='';
  if(score>0)badge=`<div class="badge up">${score} UP</div>`;
  else if(score<0)badge=`<div class="badge down">${Math.abs(score)} DOWN</div>`;
  else badge=`<div class="badge tied">TIED</div>`;
  document.getElementById('placements-0').innerHTML=badge;
  document.getElementById('placements-1').innerHTML=badge;
}

// Team Matchplay
function updateTeamMatchplay(){
  let score=0;
  for(let h=1;h<=18;h++){
    const v1=placements[h+'-team1'];
    const v2=placements[h+'-team2'];
    if(v1==='Win' && v2==='Lose')score++;
    else if(v1==='Lose' && v2==='Win')score--;
    // update hole circles:
    updateHoleCircle(h,v1,v2);
  }
  let played=0;
  for(let h=1;h<=18;h++){
    if(placements[h+'-team1'])played++;
  }
  const remaining=18-played;
  let badgeHTML1='',badgeHTML2='';
  if(score>0){
    badgeHTML1=`<div class="badge up">${score} UP</div>`;
    badgeHTML2=`<div class="badge down">${score} DOWN</div>`;
  } else if(score<0){
    badgeHTML1=`<div class="badge down">${Math.abs(score)} DOWN</div>`;
    badgeHTML2=`<div class="badge up">${Math.abs(score)} UP</div>`;
  } else {
    badgeHTML1=`<div class="badge tied">TIED</div>`;
    badgeHTML2=`<div class="badge tied">TIED</div>`;
  }
  document.getElementById('team1-badge').innerHTML=badgeHTML1;
  document.getElementById('team2-badge').innerHTML=badgeHTML2;
}

// *** Hole Circles ***
function updateHoleCircle(h,v1,v2){
  // create circles on first render
  ['team1','team2'].forEach(team=>{
    if(!document.getElementById(team+'-row1').innerHTML){
      let row1='',row2='';
      for(let i=1;i<=9;i++)row1+=`<div class="holeCircle" id="${team}-h${i}">${i}</div>`;
      for(let i=10;i<=18;i++)row2+=`<div class="holeCircle" id="${team}-h${i}">${i}</div>`;
      document.getElementById(team+'-row1').innerHTML=row1;
      document.getElementById(team+'-row2').innerHTML=row2;
    }
  });
  let id1=`team1-h${h}`,id2=`team2-h${h}`;
  const el1=document.getElementById(id1),el2=document.getElementById(id2);
  el1.className='holeCircle'; el2.className='holeCircle';
  if(v1==='Win' && v2==='Lose'){ el1.classList.add('c-team1'); el2.classList.add('c-team2'); }
  else if(v1==='Lose' && v2==='Win'){ el1.classList.add('c-team2'); el2.classList.add('c-team1'); }
  else if(v1==='Half' && v2==='Half'){ el1.classList.add('c-tied'); el2.classList.add('c-tied'); }
}

// *** Random Generators ***
const clubs=['Driver','Eisen 7','Eisen 9','Putter','Hybrid'];
const forms=['Scramble (zwei Spieler spielen abwechselnd)','Vierball','Lochwettspiel (Matchplay)','Stableford'];

function randomClub(){
  const c=clubs[Math.floor(Math.random()*clubs.length)];
  document.getElementById('clubResultBox').innerText=c;
}
function randomForm(){
  const f=forms[Math.floor(Math.random()*forms.length)];
  // ErlÃ¤uterung in Klammern -> Zeilenumbruch
  let out=f;
  const match=f.match(/^(.*?)\s*\((.*?)\)$/);
  if(match) out=match[1]+'\n('+match[2]+')';
  document.getElementById('formResultBox').innerText=out;
}
</script>

</body>
</html>